version: '2'

services:
    service:
        restart: always
        image: dbeliakov/revisor:0.1
        networks:
        - private
        - web
        depends_on:
        - database
        ports:
        - 8080:80
        labels:
        - "traefik.enable=true"
        - "traefik.backend=revisor.dbeliakov.ru"
        - "traefik.frontend.rule=Host:revisor.dbeliakov.ru"
        - "traefik.docker.network=traefikproxy_webgateway"
        evn_file:
        - config.env
        volumes:
        - /srv/docker/revisor/database/revisor.db:/revisor.db

networks:
    web:
        external:
            name: traefikproxy_webgateway
        driver: bridge
    private:
        driver: bridge

